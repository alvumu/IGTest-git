<ul class="list">
{% assign section      = include.section      | default: '' %}
{% assign contains     = include.contains     | default: '' %}
{% assign nav          = include.nav          | default: '' %}
{% assign termKind     = include.termKind     | default: '' %}
{% assign srcpath      = include.srcpath      | default: '' %}
{% assign excludeIndex = include.excludeIndex | default: true %}

{% assign pages = site.pages | concat: site.html_pages %}
{% assign pages = pages | where_exp:'p','p.url contains ".html"' %}

{% if srcpath != '' %}
  {% assign pages = pages | where_exp:'p','p.path contains srcpath' %}
{% endif %}

{% if section != '' %}
  {% assign pages = pages | where_exp:'p','p.url contains section' %}
{% endif %}

{% if contains != '' %}
  {% assign pages = pages | where_exp:'p','p.url contains contains' %}
{% endif %}

{% if nav != '' %}
  {% assign pages = pages | where:'navSection', nav %}
{% endif %}

{% if termKind != '' %}
  {% assign pages = pages | where:'termKind', termKind %}
{% endif %}

{% if excludeIndex and section != '' %}
  {% assign idxurl = section | append: 'index.html' %}
  {% assign pages = pages | where_exp:'p','p.url != idxurl' %}
{% endif %}

{% if excludeIndex and srcpath != '' %}
  {% assign pages = pages | where_exp:'p','p.path contains "/index.md" == false' %}
{% endif %}

{% assign pages = pages | uniq | sort:'title' %}

{% for p in pages %}
  {% assign title = p.title | default: p.name | default: p.url %}
  <li><a href="{{ p.url | relative_url }}">{{ title }}</a></li>
{% endfor %}

{% if pages == empty %}
  <li><em>No entries found</em></li>
{% endif %}
</ul>
