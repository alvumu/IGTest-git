<ul class="list">
{%- assign section = include.section | default: '' -%}
{%- assign pages = site.pages | concat: site.html_pages -%}
{%- assign pages = pages | where_exp:'p','p.url' -%}
{%- if section != '' -%}
  {%- assign pages = pages | where_exp:'p','p.url contains section' -%}
{%- endif -%}

{%- comment -%} Excluye el index de esa secci√≥n {%- endcomment -%}
{%- if section != '' -%}
  {%- assign idxurl = section | append:'index.html' -%}
  {%- assign pages = pages | where_exp:'p','p.url != idxurl' -%}
{%- endif -%}

{%- assign pages = pages | uniq | sort: 'title' -%}
{%- for p in pages -%}
  <li><a href="{{ p.url | relative_url }}">{{ p.title | default:p.name | default:p.url }}</a></li>
{%- endfor -%}
{%- if pages == empty -%}
  <li><em>No entries found{% if section != '' %} in {{ section }}{% endif %}</em></li>
{%- endif -%}
</ul>
