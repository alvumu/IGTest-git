<ul class="list">
{%- assign section   = include.section   | default: '/' -%}
{%- assign contains  = include.contains  | default: ''  -%}
{%- assign nav       = include.nav       | default: ''  -%}
{%- assign termKind  = include.termKind  | default: ''  -%}

{%- assign pages = site.pages | where_exp: "p", "p.output_ext == '.html'" -%}

/* Filtra por URL si se pide 'section' */
{%- if section != '' -%}
  {%- assign pages = pages | where_exp: "p", "p.url contains section" -%}
{%- endif -%}

/* Filtra por subcadena en la URL si se pide 'contains' */
{%- if contains != '' -%}
  {%- assign pages = pages | where_exp: "p", "p.url contains contains" -%}
{%- endif -%}

/* Filtra por metadato navSection */
{%- if nav != '' -%}
  {%- assign pages = pages | where: "navSection", nav -%}
{%- endif -%}

/* Filtra por metadato termKind (valueset/codesystem) */
{%- if termKind != '' -%}
  {%- assign pages = pages | where: "termKind", termKind -%}
{%- endif -%}

{%- assign sorted = pages | sort: "title" -%}
{%- for p in sorted -%}
  <li><a href="{{ p.url | relative_url }}">{{ p.title | default: p.name }}</a></li>
{%- endfor -%}

{%- if sorted == empty -%}
  <li><em>No entries found</em></li>
{%- endif -%}
</ul>
